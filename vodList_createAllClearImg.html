<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>列表</title>
<style type="text/css">
.rowsCla{
	position: absolute; 
	width: 100%;	
	top: 21px; 
	left: -1px;
	height: 231px;
	/*visibility: hidden;*/
}
/*'HansHandItalic*/
body{
	font-family:;
}
.pInfoCla{
	width: 143px; 
	/*height: 100%; */
	height: 231px;
	position: absolute;
	/*-webkit-transition-duration: 200ms;*/
}
.pNameCla{
	position: absolute; 
	top: 207px; 
	height: 30px; 
	width: 100%; 
	text-align: center; 
	/*color: #A6A29D;	*/
	color: #FFFFFF;
}
.HDMarkCla{
	background-image: url(images/list/hdMark.png); 
	width: 100px;
	height: 97px; 
	position: absolute; 
	top: -16px;
	left: 60px;	
	visibility: hidden;
}
.pImgCla{
	width: 140px;
	height: 197px;
	border: 1px solid #FFF;
}
.menuCla{
	position: absolute; 
	height: 56px; 
	line-height: 56px;  
	width: 195px; 
	text-align: center; 
	font-size: 20px; 
	color:#FFF;
	background-image:url(images/list/menuFocus0_1.png);
}
.oneMenuBgCla{
	background-image:url(images/list/menuBg.png);
	width: 106px;
	height: 106px;
	position: absolute;
}
.oneMenuDivCla{
	height: 106px;
	position: absolute;
	width: 210px;
}
.menuImgCla{
	width: 96px;
	height: 96px;
	position: absolute;
	top: 5px;
	left: 5px
}
.menuNameCla{
	color:#FFF;
	position: absolute;
	top: 70px; 
	font-size: 16px; 
	left: 5px;
	color: #FFF; 
	text-align:center; 
	line-height: 15px; 
	width: 90%;
}
</style>
<script src="common/config.js"></script>
<script src="common/keyEvent.js"></script>
<script src="common/common.js"></script>
<script src="common/showList2d.js"></script>
<script type="text/javascript">
initPage(window, false);
if(parent != self) {
	parent.jsExtendedInterface(window);
}else{
	eval("tvsee={}");
	tvsee = {debug:function(){}};
}
function eventHandler(_eventObj){
	if(_eventObj.code == "KEY_DOWN"){
		moveUD(1);	
	}else if(_eventObj.code == "KEY_UP"){
		moveUD(-1);	
	}else if(_eventObj.code == "KEY_SELECT"){
		doSelect();
	}else if(_eventObj.code == "KEY_LEFT"){
		moveLR(-1);
	}else if(_eventObj.code == "KEY_RIGHT"){
		moveLR(1);
	}else if(_eventObj.code == "KEY_BACK"){
		if(globalParams.areaPos == 2){//返回首页
			var widgetVodList = tvsee.pageWidgets.getByName("widgetVodList");
			if(widgetVodList != null){
				widgetVodList.hide();
			}
			tvsee.mainFrame.location.href = "index.html";
		}else{
			globalParams.backAreaPos = globalParams.areaPos;
			globalParams.areaPos = 2;
			$("homeMenu").style.display = "block";	
			$("oneMenuFocus").style.visibility = "visible";
			oneMenuFocusSelect();
		}	
	}
	return _eventObj.args.type;
}

function doSelect(){
	if(globalParams.areaPos == 1){
		var pid = globalParams.programDataArr[globalParams.listDataPos * globalParams.listLineNumber + globalParams.listY].pid;
		var widgetVodDetail = tvsee.pageWidgets.getByName("widgetVodDetail");
		if(widgetVodDetail != null){
			widgetVodDetail.show();
			widgetVodDetail.refreshDetailFocus();
			widgetVodDetail.initData(pid);
		}
	}else if(globalParams.areaPos == 2){
		var index = globalParams.oneMenuListX + globalParams.oneMenuListObj.dataPos * 2;
		var cateId = globalParams.oneMenuDataArr[index].id;
		$("title").innerText = globalParams.oneMenuDataArr[index].title;
		initMenu(cateId);
	}
}

function moveUD(_num){
	if(globalParams.areaPos == 0){//二级菜单
		window.clearTimeout(globalParams.menuTimeout);
		globalParams.menuListObj.changeList(_num);	
		showMenuText();
		globalParams.menuTimeout = setTimeout("initProgram();", 1000);
	}else if(globalParams.areaPos == 1){//列表内容 
		if(globalParams.isStartMoveFlag == true){
			tvsee.debug("END");
			return;	
		}
		window.clearTimeout(globalParams.listLoadDataTimeout);
		var dataPosCount = Math.ceil(globalParams.totalCount / globalParams.listLineNumber);
		var backupListY = globalParams.listY;
		globalParams.listDataPos += _num;
		if(globalParams.listDataPos < 0){
			globalParams.listDataPos = 0;
			return;
		}else if(globalParams.listDataPos >= dataPosCount){
			globalParams.listDataPos = dataPosCount - 1;	
			return;
		}
		if(dataPosCount - globalParams.listDataPos > 3 && _num > 0){
			if(globalParams.createHTMLRow <= dataPosCount){
				createPInfoHTML(1);
			}
			
		}
		var dataPosCount = Math.ceil(globalParams.totalCount / globalParams.listLineNumber) - 1;
		if(globalParams.listDataPos == dataPosCount){
			var endRowDataCount = globalParams.totalCount % globalParams.listLineNumber - 1;
			if(globalParams.listY > endRowDataCount && _num > 0 && endRowDataCount >= 0){
				globalParams.listY = endRowDataCount;
			}	
		}
		clearOrShowListImg(_num, dataPosCount);
		window.clearTimeout(globalParams.moveUDTimeout);
		$("pInfoRow" + globalParams.listDataPos + "Cell" + backupListY).style.webkitTransitionDuration = "0ms";
		var programName = globalParams.programDataArr[(globalParams.listDataPos - _num) * globalParams.listLineNumber + backupListY].programname;
		beforeLoseFocus(programName, globalParams.listDataPos - _num, backupListY);
		globalParams.moveUDTimeout = setTimeout(function(){  //先改成这样(领导希望有这效果)
			test();											 
		},100);
		
	}else if(globalParams.areaPos == 2){//一级菜单
		var dataPosCount = Math.ceil(globalParams.oneMenuDataArr.length / 2) - 1;
		if((globalParams.oneMenuListObj.dataPos == dataPosCount && _num > 0) || (globalParams.oneMenuListObj.dataPos == 0 && _num < 0)){
			return;	
		}
		$("oneMFRow" + globalParams.oneMenuListObj.dataPos +"Cell" + globalParams.oneMenuListX).style.zIndex = 0;
		$("oneMFRow" + globalParams.oneMenuListObj.dataPos +"Cell" + globalParams.oneMenuListX).style.webkitTransitionDuration = "0ms";
		$("oneMFRow" + globalParams.oneMenuListObj.dataPos +"Cell" + globalParams.oneMenuListX).style.webkitTransform = "scale(1)";
		globalParams.oneMenuListObj.changeList(_num);
		if(globalParams.oneMenuListObj.dataPos == dataPosCount){
			if(globalParams.oneMenuDataArr % 2 == 1 && globalParams.oneMenuListX == 1){
				globalParams.oneMenuListX = 0;	
			}	
		}
		oneMenuFocusSelect();
	}
}

function clearOrShowListImg(_num, _count){
	var clearRow = -1;
	var addRow = -1;
	if(_num > 0){
		clearRow = globalParams.listDataPos - _num;
		addRow = globalParams.listDataPos + 2;
		if(addRow > _count){
			addRow = -1;	
		}
	}else{
		clearRow = globalParams.listDataPos + 3;
		addRow = globalParams.listDataPos;
		if(clearRow > _count){
			clearRow = -1;
		}
	}
	if(clearRow != -1){
		for(var i = 0; i < globalParams.listLineNumber; i++){
			$("imgRow" + clearRow + "Cell" + i).src = "images/defaultImg.png";
		}	
	}
	
	if(addRow != -1){
		var j = 0;
		for(var i = addRow * globalParams.listLineNumber; i < addRow * globalParams.listLineNumber + globalParams.listLineNumber; i++){
			if(typeof(globalParams.programDataArr[i]) != "undefined"){
				$("imgRow" + addRow + "Cell" + j).src = PICURL + globalParams.programDataArr[i].picurl;	
			}
			j++;
		}	
	}
}

function test(){
	window.clearTimeout(globalParams.showTextListTimeout);
	startMove($("pInfos"), {"top" : - globalParams.listDataPos * globalParams.listLineHigh}, function(){
		globalParams.isStartMoveFlag = false;
		listFocusStyle(false);
	});
	selectedListFocusStyle();
	showPageInfo();
	globalParams.scrollObj.scroll(globalParams.listDataPos);	
}
function moveLR(_num){
	if(globalParams.areaPos == 0){
		if(_num > 0){
			if(globalParams.programDataArr.length == 0){
				return;	
			}
			window.clearTimeout(globalParams.menuTimeout);
			globalParams.areaPos = 1;	
			listFocusStyle(true);
			setTimeout("getListFocus()", 200);
		}
	}else if(globalParams.areaPos == 1){
		if(_num < 0 && globalParams.listY == 0){
			window.clearTimeout(globalParams.showTextListTimeout);
			globalParams.areaPos = 0;	
			listLoseFocusStyle();
		}else{
			globalParams.listY += _num;
			if(globalParams.listY == globalParams.listLineNumber && _num > 0){
				globalParams.listY--;
				return;
			}
			var dataPosCount = Math.ceil(globalParams.totalCount / globalParams.listLineNumber) - 1;
			if(globalParams.listDataPos == dataPosCount){
				var endRowDataCount = globalParams.totalCount % globalParams.listLineNumber - 1;
				if(globalParams.listY > endRowDataCount && _num > 0 && endRowDataCount >= 0){
					globalParams.listY--;	
					return;
				}	
			}
			window.clearTimeout(globalParams.showTextListTimeout);
			$("pInfoRow" + globalParams.listDataPos + "Cell" + (globalParams.listY - _num)).style.webkitTransitionDuration = "0ms";
			var programName = globalParams.programDataArr[globalParams.listDataPos * globalParams.listLineNumber + globalParams.listY - _num].programname;
			beforeLoseFocus(programName,  globalParams.listDataPos, globalParams.listY - _num);
			listFocusStyle(true);
			selectedListFocusStyle();
			showPageInfo();
		}	
	}else if(globalParams.areaPos == 2){
		var dataPosCount = Math.ceil(globalParams.oneMenuDataArr.length / 2) - 1;
		if((globalParams.oneMenuListX == 1 && _num > 0) || (globalParams.oneMenuListX == 0 && _num < 0)){
			globalParams.areaPos = globalParams.backAreaPos;
			$("homeMenu").style.display = "none";	
			$("oneMenuFocus").style.visibility = "hidden";
			return;	
		}
		if(globalParams.oneMenuListObj.dataPos == dataPosCount){
			if(globalParams.oneMenuDataArr % 2 == 1){
				return;
			}
		}
		$("oneMFRow" + globalParams.oneMenuListObj.dataPos +"Cell" + globalParams.oneMenuListX).style.webkitTransitionDuration = "0ms";
		$("oneMFRow" + globalParams.oneMenuListObj.dataPos +"Cell" + globalParams.oneMenuListX).style.webkitTransform = "scale(1)";
		$("oneMFRow" + globalParams.oneMenuListObj.dataPos +"Cell" + globalParams.oneMenuListX).style.zIndex = 0;
		globalParams.oneMenuListX += _num;
		oneMenuFocusSelect();	
	}
}

function beforeLoseFocus(_programName, _row, _cell){
	$("pInfoRow" + _row + "Cell" + _cell).style.webkitTransitionDuration = "0ms";
	$("pInfoRow" + _row + "Cell" + _cell).style.webkitTransform = "scale(1)";
	if(globalParams.marqueeObj != null){
		globalParams.marqueeObj.removeScroll();
		globalParams.marqueeObj = null;
	}
	if(getCharByte(_programName) > 14){
		_programName = subStr(_programName, 14, "...");	
		$("pNameRow" + _row + "Cell" + _cell).innerText = _programName;
	}
}
function selectedListFocusStyle(){
	$("listFocus").style.left = (8 + globalParams.listY * 170) + "px";
	$("listFocusBg").style.left = (-14 + globalParams.listY * 170) + "px";	
	globalParams.showTextListTimeout = setTimeout(function(){
		showProgramNameText();
	}, 200);	
}

function showProgramNameText(){
	var programName = globalParams.programDataArr[globalParams.listDataPos * globalParams.listLineNumber + globalParams.listY].programname;
	if(getCharByte(programName) > 14){
		globalParams.marqueeObj = new marqueeClass("pNameRow" + globalParams.listDataPos + "Cell" + globalParams.listY, programName);
		globalParams.marqueeObj.scroll();
	}
}

function listFocusStyle(_is2d){
	if(_is2d == true){
		//$("pInfoRow" + globalParams.listDataPos + "Cell" + globalParams.listY).style.webkitTransitionDuration = "200ms";
	}else{
		//$("pInfoRow" + globalParams.listDataPos + "Cell" + globalParams.listY).style.webkitTransitionDuration = "0ms";	
	}
	$("pInfoRow" + globalParams.listDataPos + "Cell" + globalParams.listY).style.webkitTransform = "scale(1.15)";
}

function listLoseFocusStyle(){
	var programName = globalParams.programDataArr[globalParams.listDataPos * globalParams.listLineNumber + globalParams.listY].programname;
	beforeLoseFocus(programName, globalParams.listDataPos, globalParams.listY);
	lostListFocus();
}

function getListFocus(){
	$("menuFocus0").style.visibility = "hidden";
	$("listFocus").style.visibility = "visible";
	$("listFocus").style.left = "8px";
	$("listFocusBg").style.visibility = "visible";
	$("listFocusBg").style.left = "-14px";	
	showProgramNameText();
	showPageInfo();
}

function lostListFocus(){
	$("menuFocus0").style.visibility = "visible";
	$("listFocus").style.visibility = "hidden";
	$("listFocusBg").style.visibility = "hidden";	
}
var globalParams = {
	areaPos: 0,
	ajaxObjOneMenu: null,
	oneMenuListObj: null,
	oneMenuListX: 0,
	ajaxObjMenu: null,
	menuListObj: null,
	menuPos: 0,
	menuTimeout: -1,
	ajaxObjList: null,
	totalCount: 0,
	defaltRow: 4,
	listStartHigh: 21,
	listLineHigh: 252,
	listLineNumber: 6,
	listDataPos: 0,
	createHTMLRow: 4,
	listLoadDataTimeout: -1,
	listY: 0,
	programDataArr: [],
	showTextListTimeout: -1,
	isStartMoveFlag: false,
	moveUDTimeout: -1,
	backAreaPos: -1
}

function init(){
	globalParams.scrollObj = new scrollBarClass("scroll", "scrollBar", window);
	initOneMenu();
}
function initOneMenu(){
	globalParams.oneMenuAjaxObj = new ajaxClass();
	globalParams.oneMenuAjaxObj.frame = window;
	globalParams.oneMenuAjaxObj.url = getAjaxUrl("menu1List");
	globalParams.oneMenuAjaxObj.successCallback = function(_xmlHttp, _params) {
		eval("globalParams.oneMenuDataArr = (" + _xmlHttp.responseText + ").menus");
		initOneMenuList();
	};
	globalParams.oneMenuAjaxObj.failureCallback = function(_xmlHttp, _params) {
		//$("type_0").innerText = "加载数据失败！";
	};
	globalParams.oneMenuAjaxObj.requestData();
}
function initOneMenuList(){
	//oneMFRow0Cell
	globalParams.oneMenuListObj = new showList2D({
		dataLength: Math.ceil(globalParams.oneMenuDataArr.length / 2),
		listSize: 6,
		focusDiv: "oneMenuFocus",
		listHigh: 103,
		startPlace: 103,
		dataPos: 0,
		showFlag: 1,
		duration: "200ms",
		frame: window,
		foausPos: 0,
		arrayList: ["oneMenuDiv0", "oneMenuDiv1", "oneMenuDiv2", "oneMenuDiv3", "oneMenuDiv4", "oneMenuDiv5", "oneMenuDiv6"],
		posInfo: {
			firstPos: {
				top: "0px",
				left: "0px"
			},
			lastPos: {
				top: "514px",
				left: "0px"
			},
			firstStatus: {
				top: "-103px",
				left: "0px"
			},
			endStatus: {
				top: "617px",
				left: "0px"
			}
		},
		haveData: function(_listInfo) {
			for(var i = 0; i < 2; i++){
				if (typeof(globalParams.oneMenuDataArr[_listInfo.dataPos * 2 + i]) != "undefined") {
					var data = globalParams.oneMenuDataArr[_listInfo.dataPos * 2 + i];
					$("oneMIRow" + _listInfo.idPos + "Cell" + i).style.backgroundImage = "url(" + PICURL + data.catalogpicurl + ")";
					var title = data.title;
					if(getCharByte(title,10) == true){
						title = subStr(title, 10, ".")	
					}
					$("oneMNRow" + _listInfo.idPos + "Cell" + i).innerText = title;
					$("oneMFRow" +  _listInfo.idPos +"Cell" + i).style.visibility = "visible";
				}else{
					$("oneMIRow" + _listInfo.idPos + "Cell" + i).style.backgroundImage = "url(images/global_tm.gif)";
					$("oneMNRow" + _listInfo.idPos + "Cell" + i).innerText = "";	
					$("oneMFRow" +  _listInfo.idPos +"Cell" + i).style.visibility = "hidden";
				}
			}
		},
		noData: function(_listInfo) {
			for (var i = 0; i < 2; i++) {
				$("oneMIRow" + _listInfo.idPos + "Cell" + i).style.backgroundImages = "url(images/global_tm.gif)";
				$("oneMNRow" + _listInfo.idPos + "Cell" + i).innerText = "";	
				$("oneMFRow" + _listInfo.idPos +"Cell" + i).style.visibility = "hidden";
			}
		}
	});
	globalParams.oneMenuListObj.startShow();
	if(globalParams.areaPos == 2){
		oneMenuFocusSelect();
	}
}

function oneMenuFocusSelect(){
	$("oneMFRow" + globalParams.oneMenuListObj.dataPos +"Cell" + globalParams.oneMenuListX).style.webkitTransitionDuration = "200ms";
	$("oneMFRow" + globalParams.oneMenuListObj.dataPos +"Cell" + globalParams.oneMenuListX).style.webkitTransform = "scale(1.15)";
	$("oneMFRow" + globalParams.oneMenuListObj.dataPos +"Cell" + globalParams.oneMenuListX).style.zIndex = 1;
	//globalParams.oneMenuListX = 0;
	//globalParams.oneMenuListObj.changeData(globalParams.
	$("oneMenuFocus").style.left = (globalParams.oneMenuListX * 102 + 42) + "px";
	
}
function initMenu(_cateId){
	initGlobalParams();
	clearListInfoPN();
	for(var i = 0; i < 13; i++){
		$("menuName" + i).style.webkitTransitionDuration = 0;
		$("menuName" + i).innerText = "";
		$("menuName" + i).style.top = (i * 53) + "px";	
	}
	var value = tvsee.eventFrame.globalParams.dataCache.get("menu2List_" + _cateId);
	if(value == false){
		globalParams.oneMenuAjaxObj = new ajaxClass();
		globalParams.oneMenuAjaxObj.frame = window;
		globalParams.oneMenuAjaxObj.url = getAjaxUrl("menu2List" , _cateId);
		globalParams.oneMenuAjaxObj.successCallback = function(_xmlHttp, _params) {
			eval("globalParams.menuDataArr = (" + _xmlHttp.responseText + ").menus");
			tvsee.eventFrame.globalParams.dataCache.put("menu2List_" + _cateId, globalParams.menuDataArr);
			initMenuList();
		};
		globalParams.oneMenuAjaxObj.failureCallback = function(_xmlHttp, _params) {
			//$("type_0").innerText = "加载数据失败！";
		};
		globalParams.oneMenuAjaxObj.requestData();
	}else{
		globalParams.menuDataArr = value;
		initMenuList();		
	}
}

function initGlobalParams(){
	globalParams.areaPos = 0;	
	$("homeMenu").style.display = "none";
	$("oneMenuFocus").style.visibility = "hidden";
	if(globalParams.backAreaPos == 1){
		listLoseFocusStyle();
	}
	globalParams.backAreaPos = -1;
	if(globalParams.oneMenuListObj != null){
		$("oneMFRow" + globalParams.oneMenuListObj.dataPos +"Cell" + globalParams.oneMenuListX).style.webkitTransitionDuration = "0ms";
		$("oneMFRow" + globalParams.oneMenuListObj.dataPos +"Cell" + globalParams.oneMenuListX).style.webkitTransform = "scale(1)";
		$("oneMFRow" + globalParams.oneMenuListObj.dataPos +"Cell" + globalParams.oneMenuListX).style.zIndex = 0;
		for(var i = 0; i < 7; i++){
			//$("oneMenuDiv" + i).style.webkitTransitionDuration = 0;
			$("oneMenuDiv" + i).style.top = (i * 103) + "px";	
		}
		globalParams.oneMenuListX = 0;
		globalParams.oneMenuListObj.changeData(Math.ceil(globalParams.oneMenuDataArr.length / 2), 0);
		//initOneMenuList();
	}
}
function initMenuList(){
	globalParams.totalCount = globalParams.menuDataArr.length;
	globalParams.menuListObj = new showList2D({
		dataLength: globalParams.totalCount,
		listSize: 12,
		focusDiv: "menuFocus0",
		listHigh: 53,
		startPlace: 107,
		dataPos: globalParams.menuPos,
		showFlag: 1,
		duration: "200ms",
		frame: window,
		foausPos: 0,
		arrayList: ["menuName0", "menuName1", "menuName2", "menuName3", "menuName4", "menuName5", "menuName6", "menuName7", "menuName8", "menuName9", "menuName10", "menuName11", "menuName12"],
		posInfo: {
			firstPos: {
				top: "0px",
				left: "0px"
			},
			lastPos: {
				top: "583px",
				left: "0px"
			},
			firstStatus: {
				top: "-53px",
				left: "0px"
			},
			endStatus: {
				top: "636px",
				left: "0px"
			}
		},
		haveData: function(_listInfo) {
			$("menuName" + _listInfo.idPos).innerText = globalParams.menuDataArr[_listInfo.dataPos].title;
			$("menuName" + _listInfo.idPos).style.visibility = "visible";
		},
		noData: function(_listInfo) {
			$("menuName" + _listInfo.idPos).innerText = "";
			$("menuName" + _listInfo.idPos).style.visibility = "hidden";
		}
	});
	globalParams.menuListObj.startShow();
	if(globalParams.menuDataArr.length > 0){
		showMenuText();
		initProgram();
	}
}
function showMenuText(){
	$("menuFocusName0").innerText = globalParams.menuDataArr[globalParams.menuListObj.dataPos].title;	
}
function initProgram(){
	if(globalParams.ajaxObjList != null){
		globalParams.ajaxObjList.requestAbort();	
	}
	globalParams.listY = 0;
	globalParams.listDataPos = 0;
	$("pInfos").style.top = "0px";
	globalParams.programDataArr = [];
	clearListInfoPN();
	$("menuFocus1").style.top = (globalParams.menuListObj.listPos * 53 + 107) + "px";
	$("menuFocusName1").innerText = globalParams.menuDataArr[globalParams.menuListObj.dataPos].title;
	var id = globalParams.menuDataArr[globalParams.menuListObj.dataPos].id;
	var value = tvsee.eventFrame.globalParams.dataCache.get("mediaList_" + id);
	if(value == false){
		globalParams.ajaxObjList = new ajaxClass();
		globalParams.ajaxObjList.frame = window;
		globalParams.ajaxObjList.url = getAjaxUrl("mediaList", id);
		globalParams.ajaxObjList.callbackParams = [id];
		globalParams.ajaxObjList.successCallback = function(_xmlHttp, _params) {
			eval("globalParams.programDataArr = (" + _xmlHttp.responseText + ").programs");
			tvsee.eventFrame.globalParams.dataCache.put("mediaList_" + _params[0], globalParams.programDataArr);
			initProgramList();
		};
		globalParams.ajaxObjList.failureCallback = function(_xmlHttp, _params) {
			//$("type_0").innerText = "加载数据失败！";
		};
		globalParams.ajaxObjList.requestData();	
	}else{
		globalParams.programDataArr = value;	
		initProgramList();
	}
}

function initProgramList(){
	globalParams.totalCount = globalParams.programDataArr.length;
	showPageInfo();
	var dataLen = globalParams.defaltRow * globalParams.listLineNumber < globalParams.totalCount ?　globalParams.defaltRow * globalParams.listLineNumber :　globalParams.totalCount;
	if(globalParams.createHTMLRow == 4){
		showListInfo(0, dataLen);	
		clearListInfo(dataLen, globalParams.defaltRow * globalParams.listLineNumber);
	}else{
		var len = globalParams.createHTMLRow * globalParams.listLineNumber > globalParams.totalCount ? globalParams.totalCount : globalParams.createHTMLRow * globalParams.listLineNumber;
		showListInfo(0, len);	
		clearListInfo(len, globalParams.createHTMLRow * globalParams.listLineNumber);
	}
	
	var dataPosCount = Math.ceil(globalParams.totalCount / globalParams.listLineNumber);
	globalParams.scrollObj.init(dataPosCount, 1, 336, 92, "h");
	globalParams.scrollObj.scroll(0);
}

function clearListInfoPN(){
	var row = 0;
	var j = 0;
	for(var i = 0; i < globalParams.listLineNumber * globalParams.createHTMLRow; i++){
		$("pNameRow" + row + "Cell" + j).innerText =  "";
		//$("imgRow" + row + "Cell" + j).src = "images/global_tm.gif";
		$("imgRow" + row + "Cell" + j).src = "images/defaultImg.png";
		$("markRow" + row + "Cell" + j).style.visibility = "hidden";
		if(j !=0 && j % 5 == 0){
			row++;	
			j = 0;
		}else{	
			j++;
		}	
	}	
}


function showListInfo(_start , _end){
	var row = 0;
	var j = 0;
	for(var i = _start; i < _end; i++){
		if(row > 2){
			$("imgRow" + row + "Cell" + j).src = "images/defaultImg.png";
		}
		if(row <= 2){
			$("imgRow" + row + "Cell" + j).src = PICURL + globalParams.programDataArr[i].picurl;
			/*$("imgRow" + row + "Cell" + j).onload = function(){
				fImageSizeToDiv(this);	
			}*/
		}
		//tvsee.debug("row:" + row + "  img:" + $("imgRow" + row + "Cell" + j).src);
		var  programName =  globalParams.programDataArr[i].programname;
		if(getCharByte(programName, 14)  == true){
				programName = subStr(programName, 14, "...");	
		}
		if(globalParams.programDataArr[i].definition  == 2){
			$("markRow" + row + "Cell" + j).style.visibility = "visible";	
		}
		$("pNameRow" + row + "Cell" + j).innerText = programName;
		$("pInfoRow" + row + "Cell" + j).style.visibility = "visible";
		if(j !=0 && j % 5 == 0){
			row++;	
			j = 0;
		}else{	
			j++;
		}
	}
}
function showPageInfo(){
	$("count").innerText = (globalParams.listDataPos * globalParams.listLineNumber + globalParams.listY + 1);
	$("totalCount").innerText = "/" + globalParams.totalCount + "部"
}
function clearListInfo(_start, _end){
	var row = 0;
	if(_start % globalParams.listLineNumber == 0){
		row = Math.ceil(_start / globalParams.listLineNumber);
	}else{
		row = Math.ceil(_start / globalParams.listLineNumber) - 1;	
	}
	var j = _start % globalParams.listLineNumber;
	for(var i = _start; i < _end; i++){
		$("pInfoRow" + row + "Cell" + j).style.visibility = "hidden";
		if(j !=0 && j % 5 == 0){
			row++;	
			j = 0;
		}else{	
			j++;
		}
	}	
}
function createPInfoHTML(count){
	var pInfosObj = $("pInfos");
	var leftArr = [20, 190, 360, 530, 700, 870];
	for(var i = 0; i < count; i++){
		var rowDivObj = document.createElement("div");
		rowDivObj.id = "rows" + globalParams.createHTMLRow;
		rowDivObj.style.top = (globalParams.createHTMLRow * 252 + globalParams.listStartHigh) +"px";
		rowDivObj.className = "rowsCla";
		for(var j = 0; j < globalParams.listLineNumber; j++){
			var pInfoRowObj = document.createElement("div");
			pInfoRowObj.id = "pInfoRow" + globalParams.createHTMLRow + "Cell" + j;
			pInfoRowObj.style.left = leftArr[j] + "px";
			pInfoRowObj.className = "pInfoCla";
			var imageObj = new Image();
			imageObj.className = "pImgCla";
			imageObj.id = "imgRow" + globalParams.createHTMLRow + "Cell" + j;
			pInfoRowObj.appendChild(imageObj);
			var HDMarkObj = document.createElement("div");
			HDMarkObj.className = "HDMarkCla";
			HDMarkObj.id = "markRow" + globalParams.createHTMLRow + "Cell" + j;
			pInfoRowObj.appendChild(HDMarkObj);
			var pNameObj = document.createElement("div");
			pNameObj.id = "pNameRow" + globalParams.createHTMLRow + "Cell" + j;
			pNameObj.className = "pNameCla";
			if(typeof(globalParams.programDataArr[globalParams.createHTMLRow * globalParams.listLineNumber + j]) != "undefined"){
				imageObj.src = "images/defaultImg.png";
				/*imageObj.setAttribute("picUrl", PICURL + globalParams.programDataArr[globalParams.createHTMLRow * globalParams.listLineNumber + j].picurl);
				imageObj.onload = function(){ //为了默认加载CNTV 背景图片
					this.src = this.getAttribute("picUrl");	
				}*/
				//imageObj.src = PICURL + globalParams.programDataArr[globalParams.createHTMLRow * globalParams.listLineNumber + j].picurl;	
				var programName = globalParams.programDataArr[globalParams.createHTMLRow * globalParams.listLineNumber + j].programname;
				if(getCharByte(programName, 14)  == true){
					programName = subStr(programName, 14, "...");	
				}
				pNameObj.innerText =  programName;	
				if(globalParams.programDataArr[globalParams.createHTMLRow * globalParams.listLineNumber + j].definition == 2){
					HDMarkObj.style.visibility = "visible";
				}
			}else{
				imageObj.src = "images/global_tm.gif";	
				pInfoRowObj.style.visibility = "hidden";
			}
			pInfoRowObj.appendChild(pNameObj);
			rowDivObj.appendChild(pInfoRowObj);
		}
		pInfosObj.appendChild(rowDivObj);
		globalParams.createHTMLRow++;
	}
}
window.onload = init;
</script>
</head>

<body style="overflow: hidden;">
<!--<div style="position:absolute; top: 0px; left: 0px; width: 1280px; height: 720px; background-image: url(4.jpg)"></div>-->
<div style="position:absolute; top: 0px; left: 0px; width: 1280px; height: 720px; background-image: url(images/list/bg.png);"></div>
<div style="position: absolute; left: 0px; width: 195px; height: 636px; top: 108px; overflow-y: hidden;">
	<div style="top: 0px;" class="menuCla" id="menuName0"></div>
    <div style="top: 53px;" class="menuCla" id="menuName1"></div>
    <div style="top: 106px;" class="menuCla" id="menuName2"></div>
    <div style="top: 159px;" class="menuCla" id="menuName3"></div>
    <div style="top: 212px;" class="menuCla" id="menuName4"></div>
    <div style="top: 265px;" class="menuCla" id="menuName5"></div>
    <div style="top: 318px;" class="menuCla" id="menuName6"></div>
    <div style="top: 371px;" class="menuCla" id="menuName7"></div>
    <div style="top: 424px;" class="menuCla" id="menuName8"></div>
    <div style="top: 477px;" class="menuCla" id="menuName9"></div>
    <div style="top: 530px;" class="menuCla" id="menuName10"></div>
    <div style="top: 583px;" class="menuCla" id="menuName11"></div>
    <div style="top: 636px;" class="menuCla" id="menuName12"></div>
    
	
</div>
<div id="menuFocus1" style="background-image:url(images/list/menuFocus0_2.png); position: absolute; width: 208px; height: 59px;  top: 107px; left: -2px;"> 
	<div id="menuFocusName1" style=" width: 100%; text-align: center; height: 100%; font-size: 28px; line-height: 59px; color:#ffc000;"></div>
</div>
<div id="menuFocus0" style="background-image:url(images/list/menuFocus0.png); position: absolute; width: 208px; height: 59px; top: 107px; left: -1px;">
	<div id="menuFocusName0" style=" width: 100%; text-align: center; color: #FFF; height: 100%; font-size: 28px; line-height: 59px; "></div>
</div>
<!-- -webkit-transition-duration:500ms  css3效果在志高盒子上面跑更加不行 -->
<div style="position:absolute; overflow: hidden;  width: 1032px; height: 682px; left: 199px; top: 38px;"  >
 	<div style="background-image: url(images/list/listFocusBg.png); width: 208px; height: 309px;  -webkit-transition-duration: 200ms;  position: absolute; top: -18px; left: -14px; visibility: hidden;" id="listFocusBg"></div>
	<div style="position: absolute; top: 0px; left: 0px; height: auto; width: 100%; " id="pInfos">
        <div id="rows0" style="top: 21px;" class="rowsCla">
            <div id="pInfoRow0Cell0" style="left: 20px;" class="pInfoCla">
                <img src="images/defaultImg.png" id="imgRow0Cell0" class="pImgCla" />
                <div id="markRow0Cell0" class="HDMarkCla" ></div>
                <div id="pNameRow0Cell0" class="pNameCla">&nbsp;</div>
            </div>
            <div id="pInfoRow0Cell1" style="left: 190px;" class="pInfoCla">
                <img src="images/defaultImg.png" id="imgRow0Cell1" class="pImgCla" />
                <div id="markRow0Cell1" class="HDMarkCla"></div>
                <div id="pNameRow0Cell1" class="pNameCla"></div>
            </div>
            <div id="pInfoRow0Cell2" style="left: 360px;" class="pInfoCla">
                <img src="images/defaultImg.png" id="imgRow0Cell2" class="pImgCla" />
                <div id="markRow0Cell2" class="HDMarkCla"></div>
                <div id="pNameRow0Cell2" class="pNameCla"></div>
            </div>
            <div id="pInfoRow0Cell3" style="left: 530px;" class="pInfoCla">
                <img src="images/defaultImg.png" id="imgRow0Cell3" class="pImgCla" />
                <div id="markRow0Cell3" class="HDMarkCla"></div>
                <div id="pNameRow0Cell3" class="pNameCla"></div>
            </div>
            <div id="pInfoRow0Cell4" style="left: 700px;" class="pInfoCla">
                <img src="images/defaultImg.png" id="imgRow0Cell4" class="pImgCla" />
                <div id="markRow0Cell4" class="HDMarkCla"></div>
                <div id="pNameRow0Cell4" class="pNameCla"></div>
            </div>
            <div id="pInfoRow0Cell5" style="left: 870px;" class="pInfoCla">
                <img src="images/defaultImg.png" id="imgRow0Cell5" class="pImgCla" />
                <div id="markRow0Cell5" class="HDMarkCla"></div>
                <div id="pNameRow0Cell5" class="pNameCla"></div>
            </div>
        </div>
        
        <div id="rows1" style="top: 273px; " class="rowsCla">
            <div id="pInfoRow1Cell0" style="left: 20px;" class="pInfoCla">
                <img src="images/defaultImg.png" id="imgRow1Cell0" class="pImgCla" />
                <div id="markRow1Cell0" class="HDMarkCla"></div>
                <div id="pNameRow1Cell0" class="pNameCla"></div>
            </div>
            <div id="pInfoRow1Cell1" style="left: 190px;" class="pInfoCla">
                <img src="images/defaultImg.png" id="imgRow1Cell1" class="pImgCla" />
                <div id="markRow1Cell1" class="HDMarkCla"></div>
                <div id="pNameRow1Cell1" class="pNameCla"></div>
            </div>
            <div id="pInfoRow1Cell2" style="left: 360px;" class="pInfoCla">
                <img src="images/defaultImg.png" id="imgRow1Cell2" class="pImgCla" />
                <div id="markRow1Cell2" class="HDMarkCla"></div>
                <div id="pNameRow1Cell2" class="pNameCla"></div>
            </div>
            <div id="pInfoRow1Cell3" style="left: 530px;" class="pInfoCla">
                <img src="images/defaultImg.png" id="imgRow1Cell3" class="pImgCla" />
                <div id="markRow1Cell3" class="HDMarkCla"></div>
                <div id="pNameRow1Cell3" class="pNameCla"></div>
            </div>
            <div id="pInfoRow1Cell4" style="left: 700px;" class="pInfoCla">
                <img src="images/defaultImg.png" id="imgRow1Cell4" class="pImgCla" />
                <div id="markRow1Cell4" class="HDMarkCla"></div>
                <div id="pNameRow1Cell4" class="pNameCla"></div>
            </div>
            <div id="pInfoRow1Cell5" style="left: 870px;" class="pInfoCla">
                <img src="images/defaultImg.png" id="imgRow1Cell5" class="pImgCla" />
                <div id="markRow1Cell5" class="HDMarkCla"></div>
                <div id="pNameRow1Cell5" class="pNameCla"></div>
            </div>
        </div>
        
        <div id="rows2" style="top: 525px;" class="rowsCla">
            <div id="pInfoRow2Cell0" style="left: 20px;" class="pInfoCla">
                <img src="images/defaultImg.png" id="imgRow2Cell0" class="pImgCla" />
                <div id="markRow2Cell0" class="HDMarkCla"></div>
                <div id="pNameRow2Cell0" class="pNameCla"></div>
            </div>
            <div id="pInfoRow2Cell1" style="left: 190px;" class="pInfoCla">
                <img src="images/defaultImg.png" id="imgRow2Cell1" class="pImgCla" />
                <div id="markRow2Cell1" class="HDMarkCla"></div>
                <div id="pNameRow2Cell1" class="pNameCla"></div>
            </div>
            <div id="pInfoRow2Cell2" style="left: 360px;" class="pInfoCla">
                <img src="images/defaultImg.png" id="imgRow2Cell2" class="pImgCla" />
                <div id="markRow2Cell2" class="HDMarkCla"></div>
                <div id="pNameRow2Cell2" class="pNameCla"></div>
            </div>
            <div id="pInfoRow2Cell3" style="left: 530px;" class="pInfoCla">
                <img src="images/defaultImg.png" id="imgRow2Cell3" class="pImgCla" />
                <div id="markRow2Cell3" class="HDMarkCla"></div>
                <div id="pNameRow2Cell3" class="pNameCla"></div>
            </div>
            <div id="pInfoRow2Cell4" style="left: 700px;" class="pInfoCla">
                <img src="images/defaultImg.png" id="imgRow2Cell4" class="pImgCla" />
                <div id="markRow2Cell4" class="HDMarkCla"></div>
                <div id="pNameRow2Cell4" class="pNameCla"></div>
            </div>
            <div id="pInfoRow2Cell5" style="left: 870px;" class="pInfoCla">
                <img src="images/defaultImg.png" id="imgRow2Cell5" class="pImgCla" />
                <div id="markRow2Cell5" class="HDMarkCla"></div>
                <div id="pNameRow2Cell5" class="pNameCla"></div>
            </div>
        </div>
        
        <div id="rows3" style="top: 777px;" class="rowsCla">
            <div id="pInfoRow3Cell0" style="left: 20px;" class="pInfoCla">
                <img src="images/defaultImg.png" id="imgRow3Cell0" class="pImgCla" />
                <div id="markRow3Cell0" class="HDMarkCla"></div>
                <div id="pNameRow3Cell0" class="pNameCla"></div>
            </div>
            <div id="pInfoRow3Cell1" style="left: 190px;" class="pInfoCla">
                <img src="images/defaultImg.png" id="imgRow3Cell1" class="pImgCla" />
                <div id="markRow3Cell1" class="HDMarkCla"></div>
                <div id="pNameRow3Cell1" class="pNameCla"></div>
            </div>
            <div id="pInfoRow3Cell2" style="left: 360px;" class="pInfoCla">
                <img src="images/defaultImg.png" id="imgRow3Cell2" class="pImgCla" />
                <div id="markRow3Cell2" class="HDMarkCla"></div>
                <div id="pNameRow3Cell2" class="pNameCla"></div>
            </div>
            <div id="pInfoRow3Cell3" style="left: 530px;" class="pInfoCla">
                <img src="images/defaultImg.png" id="imgRow3Cell3" class="pImgCla" />
                <div id="markRow3Cell3" class="HDMarkCla"></div>
                <div id="pNameRow3Cell3" class="pNameCla"></div>
            </div>
            <div id="pInfoRow3Cell4" style="left: 700px;" class="pInfoCla">
                <img src="images/defaultImg.png" id="imgRow3Cell4" class="pImgCla" />
                <div id="markRow3Cell4" class="HDMarkCla"></div>
                <div id="pNameRow3Cell4" class="pNameCla"></div>
            </div>
            <div id="pInfoRow3Cell5" style="left: 870px;" class="pInfoCla">
                <img src="images/defaultImg.png" id="imgRow3Cell5" class="pImgCla" />
                <div id="markRow3Cell5" class="HDMarkCla"></div>
                <div id="pNameRow3Cell5" class="pNameCla"></div>
            </div>
        </div>
    </div>
    <div style="border: 3px solid #ef7e04; width: 160px; height: 224px; top: 3px; left: 8px; position: absolute; -webkit-transition-duration: 200ms; visibility: hidden;" id="listFocus"></div>
    <!--   <div style="border: 3px solid #ef7e04; width: 152px; height: 216px; top: 8px; left: 11px; position: absolute; -webkit-transition-duration: 200ms; visibility: hidden;" id="listFocus"></div> -->
</div>

<div style="width: 19px; position: absolute; left: 1220px; top: 92px;">
	<img src="images/scrollBg0.png" width="19" height="9" /><br />
    <img src="images/scrollBg1.png" width="19" height="336" />
    <img src="images/scrollBg2.png" width="19" height="12" />
</div>

<div style="width: 19px; position: absolute; left: 1220px; top: 92px;" id="scroll">
	<img src="images/scrollFocus0.png" width="19" height="9" /><br />
    <img src="images/scrollFocus1.png" width="19" height="20" id="scrollBar" />
    <img src="images/scrollFocus2.png" width="19" height="12" />
</div>

<div style="position: absolute; top: 20px; left: 25px; width: 152px; height: 40px; line-height:40px; font-size: 28px; color: #FFF;" id="title">电影</div>
<div style="position: absolute; top: 71px; left: 41px; width: 140px; height: 22px; line-height:22px; font-size: 22px; color: #FFF;">
<div id="count" style="float:left; color: #FFAE00">0</div>
    <div id="totalCount" style="float:left;">/0部</div>
</div>

<div style="background-image:url(images/list/oneMenuBg.png); width: 319px; height: 720px; position: absolute; left: 0px; top: 0px; display: none;" id="homeMenu">
<div style=" width:219px; height: 617px; position: absolute; top: 105px; left: 45px; overflow: hidden;">
    	<div id="oneMenuDiv0" style="top: 0px;" class="oneMenuDivCla">
            <div style="top: 0px; left: 0px;" class="oneMenuBgCla" id="oneMFRow0Cell0">
                <div class="menuImgCla" id="oneMIRow0Cell0"></div>
                <div class="menuNameCla" id="oneMNRow0Cell0"></div>
            </div>
            <div style="top: 0px; left: 102px;" class="oneMenuBgCla" id="oneMFRow0Cell1">
                <div class="menuImgCla"  id="oneMIRow0Cell1"></div>
                <div class="menuNameCla" id="oneMNRow0Cell1" ></div>
            </div>
        </div>
        
        <div id="oneMenuDiv1"  style="top: 103px;" class="oneMenuDivCla">
            <div style="left: 0px;" class="oneMenuBgCla" id="oneMFRow1Cell0">
                <div class="menuImgCla" id="oneMIRow1Cell0"></div>
                <div class="menuNameCla" id="oneMNRow1Cell0"></div>
            </div>
            <div style="left: 102px;" class="oneMenuBgCla" id="oneMFRow1Cell1">
                <div class="menuImgCla" id="oneMIRow1Cell1"></div>
                <div class="menuNameCla" id="oneMNRow1Cell1"></div>
            </div>
        </div>
        
        <div id="oneMenuDiv2"  style="top: 206px;" class="oneMenuDivCla">
            <div style=" left: 0px;" class="oneMenuBgCla" id="oneMFRow2Cell0">
                <div class="menuImgCla" id="oneMIRow2Cell0"></div>
                <div class="menuNameCla" id="oneMNRow2Cell0"></div>
            </div>
            <div style="left: 102px;" class="oneMenuBgCla" id="oneMFRow2Cell1">
                <div class="menuImgCla" id="oneMIRow2Cell1"></div>
                <div class="menuNameCla" id="oneMNRow2Cell1"></div>
            </div>
        </div>
        
        <div id="oneMenuDiv3"  style="top: 309px;" class="oneMenuDivCla">
            <div style="left: 0px;" class="oneMenuBgCla" id="oneMFRow3Cell0">
                <div class="menuImgCla" id="oneMIRow3Cell0"></div>
                <div class="menuNameCla" id="oneMNRow3Cell0"></div>
            </div>
            <div style="left: 102px;" class="oneMenuBgCla" id="oneMFRow3Cell1">
                <div class="menuImgCla" id="oneMIRow3Cell1"></div>
                <div class="menuNameCla" id="oneMNRow3Cell1"></div>
            </div>
        </div>
        <div id="oneMenuDiv4"  style="top: 412px;" class="oneMenuDivCla">
            <div style="left: 0px;" class="oneMenuBgCla" id="oneMFRow4Cell0">
                <div class="menuImgCla" id="oneMIRow4Cell0"></div>
                <div class="menuNameCla" id="oneMNRow4Cell0"></div>
            </div>
            <div style="left: 102px;" class="oneMenuBgCla" id="oneMFRow4Cell1">
                <div class="menuImgCla" id="oneMIRow4Cell1"></div>
                <div class="menuNameCla" id="oneMNRow4Cell1"></div>
            </div>
        </div>
        <div id="oneMenuDiv5"  style="top: 515px;" class="oneMenuDivCla">
            <div style="left: 0px;" class="oneMenuBgCla" id="oneMFRow5Cell0">
                <div class="menuImgCla" id="oneMIRow5Cell0"></div>
                <div class="menuNameCla" id="oneMNRow5Cell0"></div>
            </div>
            <div style="left: 102px;" class="oneMenuBgCla" id="oneMFRow5Cell1">
                <div class="menuImgCla" id="oneMIRow5Cell1"></div>
                <div class="menuNameCla" id="oneMNRow5Cell1"></div>
            </div>
        </div>
        <div id="oneMenuDiv6"  style="top: 617px;" class="oneMenuDivCla">
            <div style="left: 0px;" class="oneMenuBgCla" id="oneMFRow6Cell0">
                <div class="menuImgCla" id="oneMIRow6Cell0"></div>
                <div class="menuNameCla" id="oneMNRow6Cell0"></div>
            </div>
            <div style="left: 102px;" class="oneMenuBgCla" id="oneMFRow6Cell1">
                <div class="menuImgCla" id="oneMIRow6Cell1"></div>
                <div class="menuNameCla" id="oneMNRow6Cell1"></div>
            </div>
        </div>
    </div>
</div>

<div id="oneMenuFocus" style="position: absolute; border: 3px solid #ef7e04; width: 106px; height: 106px; left: 42px; top: 100px; visibility: hidden; z-index: 1;"></div>
<!--<div style="position: absolute; top: 500px; left: 200px;">
	<input type="button" value=" test  " onclick="test();" />
</div>-->

</body>
</html>
